---
jobs:
- name: check-cert-needs-renewal
  plan:
  - get: git-pipeline
  - get: schedule
    trigger: true
  - task: check-cert
    file: git-pipeline/pipeline/tasks/check-cert.yml
    params:
      GCP_CREDENTIALS: {{GCP_CREDENTIALS}}
      GCP_HTTPS_PROXY: {{GCP_HTTPS_PROXY}}
      CERT_RENEW_BEFORE: {{CERT_RENEW_BEFORE}}
resources:
- name: git-pipeline
  type: git
  source:
    branch: master
    uri: https://github.com/mattsday/le-for-pcf-on-gcp
- name: schedule
  type: time
  source:
    interval: 60s
    start: "12:00 AM"
    stop: "11:59 PM"
#    interval: 24h
#    start: "01:00 AM"
#    stop: "03:00 AM"
#    days: [Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday]